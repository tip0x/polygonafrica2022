{"ast":null,"code":"/* Copyright (c) 2012-2016 LevelUP contributors\n * See list at <https://github.com/level/levelup#contributing>\n * MIT License\n * <https://github.com/level/levelup/blob/master/LICENSE.md>\n */\n\nvar util = require('./util');\nvar WriteError = require('level-errors').WriteError;\nvar getOptions = util.getOptions;\nvar dispatchError = util.dispatchError;\nfunction Batch(levelup, codec) {\n  this._levelup = levelup;\n  this._codec = codec;\n  this.batch = levelup.db.batch();\n  this.ops = [];\n  this.length = 0;\n}\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(options);\n  var key = this._codec.encodeKey(key_, options);\n  var value = this._codec.encodeValue(value_, options);\n  try {\n    this.batch.put(key, value);\n  } catch (e) {\n    throw new WriteError(e);\n  }\n  this.ops.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  this.length++;\n  return this;\n};\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(options);\n  var key = this._codec.encodeKey(key_, options);\n  try {\n    this.batch.del(key);\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops.push({\n    type: 'del',\n    key: key\n  });\n  this.length++;\n  return this;\n};\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear();\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops = [];\n  this.length = 0;\n  return this;\n};\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup;\n  var ops = this.ops;\n  try {\n    this.batch.write(function (err) {\n      if (err) {\n        return dispatchError(levelup, new WriteError(err), callback);\n      }\n      levelup.emit('batch', ops);\n      if (callback) {\n        callback();\n      }\n    });\n  } catch (err) {\n    throw new WriteError(err);\n  }\n};\nmodule.exports = Batch;","map":{"version":3,"names":["util","require","WriteError","getOptions","dispatchError","Batch","levelup","codec","_levelup","_codec","batch","db","ops","length","prototype","put","key_","value_","options","key","encodeKey","value","encodeValue","e","push","type","del","err","clear","write","callback","emit","module","exports"],"sources":["/home/tiptape/relearningculture/zkevm/frontend/node_modules/levelup/lib/batch.js"],"sourcesContent":["/* Copyright (c) 2012-2016 LevelUP contributors\n * See list at <https://github.com/level/levelup#contributing>\n * MIT License\n * <https://github.com/level/levelup/blob/master/LICENSE.md>\n */\n\nvar util = require('./util')\nvar WriteError = require('level-errors').WriteError\nvar getOptions = util.getOptions\nvar dispatchError = util.dispatchError\n\nfunction Batch (levelup, codec) {\n  this._levelup = levelup\n  this._codec = codec\n  this.batch = levelup.db.batch()\n  this.ops = []\n  this.length = 0\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(options)\n\n  var key = this._codec.encodeKey(key_, options)\n  var value = this._codec.encodeValue(value_, options)\n\n  try {\n    this.batch.put(key, value)\n  } catch (e) {\n    throw new WriteError(e)\n  }\n\n  this.ops.push({ type: 'put', key: key, value: value })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(options)\n\n  var key = this._codec.encodeKey(key_, options)\n\n  try {\n    this.batch.del(key)\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops.push({ type: 'del', key: key })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear()\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops = []\n  this.length = 0\n\n  return this\n}\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup\n  var ops = this.ops\n\n  try {\n    this.batch.write(function (err) {\n      if (err) { return dispatchError(levelup, new WriteError(err), callback) }\n      levelup.emit('batch', ops)\n      if (callback) { callback() }\n    })\n  } catch (err) {\n    throw new WriteError(err)\n  }\n}\n\nmodule.exports = Batch\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}